<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Austin's Adventures</title>
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
  <script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
  <link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
  <style>
    body { margin:0; padding:0; }
    .map { position:absolute; top:0; bottom:0; width:100%; }
    .filter-ui {
  background: #fff;
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 100;
  padding: 10px;
  border-radius: 3px;
}

.filter-ui input {
  vertical-align: middle;
}
  </style>
</head>
<body>
<div id='map_simple' class='map'> </div>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoiYWV2dHVzaGVua28iLCJhIjoiY2lvdjZ5dzJ0MDB2MHR6bTVoeWM4cXA3ZSJ9.aDNKdKtfrG6YVLATPWfVfw';
var filters = document.getElementById('filters');
var geojson = [
  {
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [103.8858939, 1.308248]
    },
    properties: {
      "description": "<b>Old Airport Road</b><br><p>What could I say that hasn&rsquo;t been said already? Everyone loves Old Airport Road. I tried rojak for the first time, on my first day in Singapore, here at dear Toa Payoh Rojak #01-108. In the mood for prawn noodle with pig&rsquo;s tail? Albert Street Prawn Noodle #01-10 could do you well. The pig&rsquo;s tail is optional, but I highly recommend it.</p><p>If you go, say hello to Kallang Estate Food Centre and the wonderful bak chor mee from #01-14 next door. They don&rsquo;t get the love that they should. OAR casts a long shadow.</p>",
      'marker-color': '#FF0000',
      'marker-size': 'medium',
      'marker-symbol': 'restaurant'
    }
  },
{
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [103.843098, 1.282573]
    },
    properties: {
      "description": "<b>Chinatown Complex / Chinatown Smith Street</b><br><p>Holy mackerel this sucker is huge. It&rsquo;s the biggest in the country, if I&rsquo;m not wrong. Four colour-coded sections, multiple craft beer stalls, at least two double-wide stalls specializing in steamed fish head, and the world&rsquo;s first Michelin-starred street food establishment? It&rsquo;s all here.</p><p>Don&rsquo;t miss starchy steamed things from Jia Ji Mei Shi #02-168, fish head with fermented bean, black bean, or hot sauce from An Ji #02-193, or that barrier-shattering soya sauce chicken.</p>",
      'marker-color': '#BD00BD',
      'marker-size': 'medium',
      'marker-symbol': 'restaurant'
    }
  },
{
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [103.935039, 1.30668]
    },
    properties: {
      "description": "<b>East Coast Lagoon</b><br><p>The setting, the food, and the highly diverse clientele conspire to make a meal at East Coast Lagoon a top-notch Singaporean affair. You can tell your friends visiting from out of town that the ships they see waiting to come into port make for the most tangible representation of macroeconomic activity you know&#8230; unless you know a better one.</p><p>For food? Some of the best oyster egg in the country can be had at Song Kee Fried Oyster #01-15. The wings from Ah Hwee BBQ Chicken Wings &amp; Spring Chicken, #14, are top notch. I take no issue with the good things people say about Roxy Laksa #48. It&rsquo;s cockles, my friends, blood cockles, &lsquo;hum&rsquo; in dialect, that rise to the top of my list of foods most at home at East Cost. They were meant to be eaten with a view of the water. Order them half cooked from BBQ Seafood Kitchen #4, or compare the half cooked to the full. They&rsquo;re bloodier and more wild and wonderful when they&rsquo;re squishily rare.</p>",
      'marker-color': '#BD00BD',
      'marker-size': 'medium',
      'marker-symbol': 'restaurant'
    }
  },
{
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [103.839179, 1.312041]
    },
    properties: {
      "description": "<b>Newton</b><br><p>Oyster egg from Hup Kee Fried Oyster Omelette #01-73 hits the spot, as does Newton&rsquo;s central location. It&rsquo;s less commercial and touristic than it was when I first moved to SG, too: many fewer hawkers jumped out at me with picture menus on my most recent visit than when I first went in late 2011.</p>",
      'marker-color': '#FFFF00',
      'marker-size': 'medium',
      'marker-symbol': 'restaurant'
    }
  },
{
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [103.844915, 1.280092]
    },
    properties: {
      "description": "<b>Maxwell</b><br><p>An old standby, an original, and a flag-bearer for Singapore hawker food: Maxwell&rsquo;s place in the sun is secure. Ask the uncle at China Street Fritters #64 what&rsquo;s the difference between Hokkien and Teochew ngoh hiang (spoiler: the Hokkien version lacks the distinctive Teochew prawn cracker, hei piah). Track down Maxwell Fuzhou Oyster Cake #5 and get, well, an oyster cake. It&rsquo;s not even the most famous porridge place at Maxwell &ndash; that&rsquo;d be Zhen Zhen Porridge #54 - but Ho Kee Poridge #45 is my go-to for century egg and pork gruel, mid-day or late-night.</p><p>Now let&rsquo;s talk about Tian Tian (#10/11). Of all the hawker foods, chicken rice is primary. Of all the food centre chicken rice joints, Tian Tian is the most renowned (Boon Tong Kee and Wee Nam Kee have their proponents, but I&rsquo;m not concerned with brick-and-mortar right now). I&rsquo;m a Tian Tian believer. What you&rsquo;re looking for in white chicken is lots of jelly underneath the skin; TT delivers the goods. Beware that most Singaporeans will tell you it&rsquo;s the rice and the chili that make or break the &#28023;&#21335;&#40481;&#39277; experience. Tian Tian scores well in both categories.</p><p>I&rsquo;ll take this opportunity to plug the URA City Gallery next door, a must-visit elaboration on Singaporean urbanism complete with giant scale models of SG&rsquo;s downtown and &ndash; get this &ndash; a scale model of the entire country, minus Pulau Ubin and Tekong. It&rsquo;s amazing.</p>",
      'marker-color': '#BD00BD',
      'marker-size': 'medium',
      'marker-symbol': 'restaurant'
    }
  }
];

var mapSimple = L.mapbox.map('map_simple', 'mapbox.streets')
  .setView([1.3614899, 103.81256104], 11);
var myLayer = L.mapbox.featureLayer().setGeoJSON(geojson).addTo(mapSimple);
myLayer.on('ready', function(e) {
  var typesObj = {},
    types = [];
  var features = e.target._geojson.features;
  for (var i = 0; i < features.length; i++) {
    typesObj[features[i].properties['marker-color']] = true;
  }
  for (var key in typesObj) {
    if ({}.hasOwnProperty.call(typesObj, key)) {
      types.push(key);
    }
  }
  var checkboxes = [];
  for (var j = 0; j < types.length; j++) {
    var item = filters.appendChild(document.createElement('div'));
    var checkbox = item.appendChild(document.createElement('input'));
    var label = item.appendChild(document.createElement('label'));
    checkbox.type = 'checkbox';
    checkbox.id = types[j];
    checkbox.checked = true;
    label.innerHTML = types[j];
    label.setAttribute('for', types[j]);
    checkbox.addEventListener('change', update);
    checkboxes.push(checkbox);
  }

  function update() {
    var enabled = {};
    for (var k = 0; k < checkboxes.length; k++) {
      if (checkboxes[k].checked) enabled[checkboxes[k].id] = true;
    }
    markers.setFilter(function(feature) {
      return feature.properties['marker-symbol'] in enabled;
    });
  }
}).addTo(mapSimple);



</script>
</body>
</html>


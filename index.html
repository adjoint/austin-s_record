<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Austin's Hawker Adventures</title>
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
  <script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
  <link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
  <style>
    body { margin:0; padding:0; }
    .map { position:absolute; top:0; bottom:0; width:100%; }
    .filter-ui {
  background: #fff;
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 100;
  padding: 10px;
  border-radius: 3px;
}

.filter-ui input {
  vertical-align: middle;
}
  </style>
</head>
<body>
<div id='map_simple' class='map'> </div>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoiYWV2dHVzaGVua28iLCJhIjoiY2lvdjZ5dzJ0MDB2MHR6bTVoeWM4cXA3ZSJ9.aDNKdKtfrG6YVLATPWfVfw';
var filters = document.getElementById('filters');
var geojson = [
  {
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [103.8858939, 1.308248]
    },
    properties: {
      "description": "<h3><b>Old Airport Road</b></h3><p><i>Blk 51 Old Airport Road, 390051</i></p><p>An all-time great, this one.</p><p>Do not overlook <b>Blanco Court Food Centre #01-135</b> (it&rsquo;s a stall, in fact, not a meta-style food centre within a food centre). They do kway chap awfully well. You&rsquo;ll likely encounter a queue. Embrace it. These intestines are top-notch.</p><p><b>Toa Payoh Rojak #01-108</b> mixes it with the best of them; very thick, this one. I ventured out to Old Airport Road on my first day in Singapore, 19 September, 2011, and treated myself to this stuff. Good call. </p><p>Duelling CKT stalls? Yes, please. <b>Dong Ji Fried Kway Teow #01-138</b> and <b>Lao Fu Zi Fried Kway Teow #01-12</b> (LFZ is the more prominent with the psychedelic purple/green sign) deliver the goods.</p><p>Some say the chili crab from <b>Mattar Road Seafood Barbecue #01-63</b> is some of the best in the country. I&rsquo;m inclined to agree with them.</p><p>Pig&rsquo;s tail prawn noodle from <b>Albert Street Prawn Noodle #01-10</b> could do you well, too.</p><p>When you go to OAR, say hello to Kallang Estate next door and the wonderful bak chor mee from <b>&#22823;&#40060;&#22278;&#32933;&#32905;&#33054;&#38754; #01-14</b>. They don&rsquo;t get the love that they should. OAR casts a long shadow.</p>",
      'marker-color': '#2721D6',
      'marker-size': 'medium',
      'marker-symbol': 'restaurant'
    }
  },
{
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [103.843098, 1.282573]
    },
    properties: {
      "description": "<h3><b>Chinatown Complex</b></h3><p><i>Blk 335 Smith Street, 050335</i></p><p>Holy mackerel this sucker is huge. It&rsquo;s the largest food centre in the country, if I&rsquo;m not wrong. Four colour-coded sections, a few craft beer stalls, and the infamous Michelin-starred <b>Liao Fan Hong Kong Soya Sauce Chicken Rice &amp; Noodle #02- 126</b> (the chicken is very tasty and I enjoy epic queues, so yes, you should go). But there&rsquo;s more&#8230; </p><p>Don&rsquo;t miss starchy steamed things from <b>Jia Ji Mei Shi #02-168</b>. They used to make a mean plate of raw fish &ndash; SG&rsquo;s best beer snack, in my book &ndash; but I&rsquo;m not sure they&rsquo;ve brought it back after that odd bacteria scare and resultant island-wide moratorium. If they&rsquo;re selling, you&rsquo;re in luck!</p><p>It&rsquo;s hard to say whether <b>Cheng Ji #02-190/191</b> or <b>An Ji #02-193/194</b> swims the anchor leg of the steamed fish head relay around these parts. If you stick with Cheng, a &ldquo;Song&rdquo; head does the trick. If you pull for An, you&rsquo;ll find their heads do well in fermented bean, black bean, or hot sauce.</p><p>Now, beer. One side of the centre overlooks bona fide Chinatown hustle-bustle. The view and the energy pair perfectly with a couple of brews. How fitting! <b>The Good Beer Company #02-58</b> and <b>Smith Street Taps #02-62</b> serve a cosmopolitan crowd a fine and wide array. A terrific little treasure.</p>",
      'marker-color': '#7C09B0',
      'marker-size': 'medium',
      'marker-symbol': 'restaurant'
    }
  }
];

var mapSimple = L.mapbox.map('map_simple', 'mapbox.streets')
  .setView([1.3614899, 103.81256104], 11);
var myLayer = L.mapbox.featureLayer().setGeoJSON(geojson).addTo(mapSimple);
myLayer.on('ready', function(e) {
  var typesObj = {},
    types = [];
  var features = e.target._geojson.features;
  for (var i = 0; i < features.length; i++) {
    typesObj[features[i].properties['marker-color']] = true;
  }
  for (var key in typesObj) {
    if ({}.hasOwnProperty.call(typesObj, key)) {
      types.push(key);
    }
  }
  var checkboxes = [];
  for (var j = 0; j < types.length; j++) {
    var item = filters.appendChild(document.createElement('div'));
    var checkbox = item.appendChild(document.createElement('input'));
    var label = item.appendChild(document.createElement('label'));
    checkbox.type = 'checkbox';
    checkbox.id = types[j];
    checkbox.checked = true;
    label.innerHTML = types[j];
    label.setAttribute('for', types[j]);
    checkbox.addEventListener('change', update);
    checkboxes.push(checkbox);
  }

  function update() {
    var enabled = {};
    for (var k = 0; k < checkboxes.length; k++) {
      if (checkboxes[k].checked) enabled[checkboxes[k].id] = true;
    }
    markers.setFilter(function(feature) {
      return feature.properties['marker-symbol'] in enabled;
    });
  }
}).addTo(mapSimple);



</script>
</body>
</html>

